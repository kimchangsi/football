<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yi.mappers.leagueMapper">
	<resultMap type="com.yi.domain.LeagueVO" id="resultLeague">
		<id column="l_no" property="lNo"/>
		<result column="l_name" property="lName"/>
		<result column="l_tel" property="lTel"/>
		<result column="l_rank" property="lRank"/>
		<result column="l_out" property="lOut"/>
		<result column="l_quarterfinals" property="lQuarterfinals"/>
		<result column="l_semifianl" property="lSemifianl"/>
		<result column="l_final" property="lFinal"/>
		<result column="l_away" property="lAway"/>
		<result column="l_goal" property="lGoal"/>
		<result column="l_state" property="lState"/>
	</resultMap>
	
	
	
	<resultMap type="com.yi.domain.LeagueVO" id="resultLeagueByKcm" extends="resultLeague">
		<association property="lTeam" resultMap="com.yi.mappers.teamMapper.teamResult"></association>
		<association property="lLeagueName" resultMap="com.yi.mappers.leagueKindMapper.resultLeagueKind"></association>
	</resultMap>

	<insert id="insertLeague" parameterType="com.yi.domain.LeagueVO">
		INSERT INTO league
		(l_name, l_tel,l_team, l_league_name)
		VALUES(#{lName}, #{lTel}, #{lTeam.tName}, #{lLeagueName.lkName})
	</insert>
	 
	<select id="selectLeagueByRandom" resultMap="resultLeagueByKcm">
		select l_no, l_name, l_tel, l_rank, l_out, l_quarterfinals, l_semifianl, l_final, l_away, t_name,lk_name, l_goal, l_state from league join team on league.l_team = team.t_name join league_kind on league.l_league_name = league_kind.lk_name where l_quarterfinals=0 and l_out = 0 order by rand(1)
	</select>
</mapper>